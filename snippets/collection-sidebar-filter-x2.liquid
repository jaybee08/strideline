{% #theme-check-disable %} 
{%- assign _label = filter.label | append: ',' | downcase -%}
{%- assign state = ' hide' -%}

{% comment %} By collection filter {% endcomment %}
{%- capture data_collection -%}
  {%- for filter_value in filter.values -%}
      {%- assign cstate = 'hide' -%}
      {%- unless filter_value.active -%}
        {% if filter_value.count == 0 and filter_value.active == false -%}{%- else -%}{%- assign state = '' -%}{%- assign cstate = '' -%}{%- endif -%}
      {%- endunless %}

      {%- if filter_value.label contains 'Collection|' -%}

        <li{% if cstate == 'hide' %} class="hide"{% endif %}>

          {%- assign _imagefromshema = imagefromshema | downcase -%}

          {%- capture texture -%}{%- include 'get_swatch_texture' texture_name: filter_value.value textures_shema: _imagefromshema -%}{%- endcapture -%}
          {%- capture texture_style -%}{%- if texture != '' -%}{{ texture | asset_url }}{%- endif -%}{%- endcapture -%}
          
          {%- assign tagborder = settings.shopby_color_filter_border | excape | strip | downcase -%}
          {% capture tagborder %}{% if value == tagborder %} border{% endif %}{% endcapture %}
          
          {%- assign filter_value_url = filter_value.url_to_add | replace: '&view=ajax', '' -%}
          
          {%- if _otypeco contains _label -%}

          {%- assign colors = ',' | append: settings.product_colors | strip_newlines | downcase | append: ',' -%}
          {%- assign _tag = ',' | append: value | append: ':' -%}
          {%- capture curcol -%}{%- if colors contains _tag -%}{{ colors | split: _tag | last | split: ',' | first | strip }}{%- else -%}{%- endif -%}{%- endcapture -%}

          <a href="{{filter_value_url}}"
            {% if texture_style != '' or curcol != '' %}
            class="options-color{{ tagborder }}"
            style="{%- if texture_style != '' -%}background-image: url('{{ texture_style }}'){%- elsif curcol != '' -%}background:{{curcol}}{%- endif -%}"
            data-tooltip="{{ filter_value.label | excape }}"
            {% endif %}>
            {{ filter_value.label }}
          </a>

          {%- elsif _otypebtn contains _label -%}

          {%- if texture_style != '' -%}
          <a href="{{filter_value_url}}"
            class="options-color{{ tagborder }}"
            style="background-image: url('{{ texture_style }}')">
            {{ filter_value.label }}
          </a>
          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label }}</a>
          {%- endif -%}

          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label | replace: 'Collection|', ' ' }}</a>
          {%- endif -%}
        </li>
        
    {%- endif -%}
    
  {%- endfor -%}
{%- endcapture -%}
{%- assign data_collection = data_collection | strip -%}

{% comment %} By category filter {% endcomment %}
{%- capture data_category -%}
  {%- for filter_value in filter.values -%}
      {%- assign cstate = 'hide' -%}
      {%- unless filter_value.active -%}
        {% if filter_value.count == 0 and filter_value.active == false -%}{%- else -%}{%- assign state = '' -%}{%- assign cstate = '' -%}{%- endif -%}
      {%- endunless %}

      {%- if filter_value.label contains 'Category|' -%}

        <li{% if cstate == 'hide' %} class="hide"{% endif %}>

          {%- assign _imagefromshema = imagefromshema | downcase -%}

          {%- capture texture -%}{%- include 'get_swatch_texture' texture_name: filter_value.value textures_shema: _imagefromshema -%}{%- endcapture -%}
          {%- capture texture_style -%}{%- if texture != '' -%}{{ texture | asset_url }}{%- endif -%}{%- endcapture -%}
          
          {%- assign tagborder = settings.shopby_color_filter_border | excape | strip | downcase -%}
          {% capture tagborder %}{% if value == tagborder %} border{% endif %}{% endcapture %}
          
          {%- assign filter_value_url = filter_value.url_to_add | replace: '&view=ajax', '' -%}
          
          {%- if _otypeco contains _label -%}

          {%- assign colors = ',' | append: settings.product_colors | strip_newlines | downcase | append: ',' -%}
          {%- assign _tag = ',' | append: value | append: ':' -%}
          {%- capture curcol -%}{%- if colors contains _tag -%}{{ colors | split: _tag | last | split: ',' | first | strip }}{%- else -%}{%- endif -%}{%- endcapture -%}

          <a href="{{filter_value_url}}"
            {% if texture_style != '' or curcol != '' %}
            class="options-color{{ tagborder }}"
            style="{%- if texture_style != '' -%}background-image: url('{{ texture_style }}'){%- elsif curcol != '' -%}background:{{curcol}}{%- endif -%}"
            data-tooltip="{{ filter_value.label | excape }}"
            {% endif %}>
            {{ filter_value.label }}
          </a>

          {%- elsif _otypebtn contains _label -%}

          {%- if texture_style != '' -%}
          <a href="{{filter_value_url}}"
            class="options-color{{ tagborder }}"
            style="background-image: url('{{ texture_style }}')">
            {{ filter_value.label }}
          </a>
          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label }}</a>
          {%- endif -%}

          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label | replace: 'Category|', ' ' }}</a>
          {%- endif -%}
        </li>
        
    {%- endif -%}
    
  {%- endfor -%}
{%- endcapture -%}
{%- assign data_category = data_category | strip -%}

{% comment %} By school filter {% endcomment %}
{%- capture data_school -%}
  {%- for filter_value in filter.values -%}
      {%- assign cstate = 'hide' -%}
      {%- unless filter_value.active -%}
        {% if filter_value.count == 0 and filter_value.active == false -%}{%- else -%}{%- assign state = '' -%}{%- assign cstate = '' -%}{%- endif -%}
      {%- endunless %}

      {%- if filter_value.label contains 'School|' -%}

        <li{% if cstate == 'hide' %} class="hide"{% endif %}>

          {%- assign _imagefromshema = imagefromshema | downcase -%}

          {%- capture texture -%}{%- include 'get_swatch_texture' texture_name: filter_value.value textures_shema: _imagefromshema -%}{%- endcapture -%}
          {%- capture texture_style -%}{%- if texture != '' -%}{{ texture | asset_url }}{%- endif -%}{%- endcapture -%}
          
          {%- assign tagborder = settings.shopby_color_filter_border | excape | strip | downcase -%}
          {% capture tagborder %}{% if value == tagborder %} border{% endif %}{% endcapture %}
          
          {%- assign filter_value_url = filter_value.url_to_add | replace: '&view=ajax', '' -%}
          
          {%- if _otypeco contains _label -%}

          {%- assign colors = ',' | append: settings.product_colors | strip_newlines | downcase | append: ',' -%}
          {%- assign _tag = ',' | append: value | append: ':' -%}
          {%- capture curcol -%}{%- if colors contains _tag -%}{{ colors | split: _tag | last | split: ',' | first | strip }}{%- else -%}{%- endif -%}{%- endcapture -%}

          <a href="{{filter_value_url}}"
            {% if texture_style != '' or curcol != '' %}
            class="options-color{{ tagborder }}"
            style="{%- if texture_style != '' -%}background-image: url('{{ texture_style }}'){%- elsif curcol != '' -%}background:{{curcol}}{%- endif -%}"
            data-tooltip="{{ filter_value.label | excape }}"
            {% endif %}>
            {{ filter_value.label | replace: 'School|', ' ' }}
          </a>

          {%- elsif _otypebtn contains _label -%}

          {%- if texture_style != '' -%}
          <a href="{{filter_value_url}}"
            class="options-color{{ tagborder }}"
            style="background-image: url('{{ texture_style }}')">
            {{ filter_value.label }}
          </a>
          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label | replace: 'School|', ' ' }}</a>
          {%- endif -%}

          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label | replace: 'School|', ' ' }}</a>
          {%- endif -%}
        </li>
        
    {%- endif -%}
    
  {%- endfor -%}
{%- endcapture -%}
{%- assign data_school = data_school | strip -%}

{% comment %} By team filter {% endcomment %}
{%- capture data_team -%}
  {%- for filter_value in filter.values -%}
      {%- assign cstate = 'hide' -%}
      {%- unless filter_value.active -%}
        {% if filter_value.count == 0 and filter_value.active == false -%}{%- else -%}{%- assign state = '' -%}{%- assign cstate = '' -%}{%- endif -%}
      {%- endunless %}

      {%- if filter_value.label contains 'Team|' -%}

        <li{% if cstate == 'hide' %} class="hide"{% endif %}>

          {%- assign _imagefromshema = imagefromshema | downcase -%}

          {%- capture texture -%}{%- include 'get_swatch_texture' texture_name: filter_value.value textures_shema: _imagefromshema -%}{%- endcapture -%}
          {%- capture texture_style -%}{%- if texture != '' -%}{{ texture | asset_url }}{%- endif -%}{%- endcapture -%}
          
          {%- assign tagborder = settings.shopby_color_filter_border | excape | strip | downcase -%}
          {% capture tagborder %}{% if value == tagborder %} border{% endif %}{% endcapture %}
          
          {%- assign filter_value_url = filter_value.url_to_add | replace: '&view=ajax', '' -%}
          
          {%- if _otypeco contains _label -%}

          {%- assign colors = ',' | append: settings.product_colors | strip_newlines | downcase | append: ',' -%}
          {%- assign _tag = ',' | append: value | append: ':' -%}
          {%- capture curcol -%}{%- if colors contains _tag -%}{{ colors | split: _tag | last | split: ',' | first | strip }}{%- else -%}{%- endif -%}{%- endcapture -%}

          <a href="{{filter_value_url}}"
            {% if texture_style != '' or curcol != '' %}
            class="options-color{{ tagborder }}"
            style="{%- if texture_style != '' -%}background-image: url('{{ texture_style }}'){%- elsif curcol != '' -%}background:{{curcol}}{%- endif -%}"
            data-tooltip="{{ filter_value.label | excape }}"
            {% endif %}>
            {{ filter_value.label }}
          </a>

          {%- elsif _otypebtn contains _label -%}

          {%- if texture_style != '' -%}
          <a href="{{filter_value_url}}"
            class="options-color{{ tagborder }}"
            style="background-image: url('{{ texture_style }}')">
            {{ filter_value.label }}
          </a>
          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label }}</a>
          {%- endif -%}

          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label | replace: 'Team|', ' ' }}</a>
          {%- endif -%}
        </li>
        
    {%- endif -%}
    
  {%- endfor -%}
{%- endcapture -%}
{%- assign data_team = data_team | strip -%}

{% comment %} By type filter {% endcomment %}
{%- capture data_type -%}
  {%- for filter_value in filter.values -%}
      {%- assign cstate = 'hide' -%}
      {%- unless filter_value.active -%}
        {% if filter_value.count == 0 and filter_value.active == false -%}{%- else -%}{%- assign state = '' -%}{%- assign cstate = '' -%}{%- endif -%}
      {%- endunless %}

      {%- if filter_value.label contains 'Type|' -%}

        <li{% if cstate == 'hide' %} class="hide"{% endif %}>

          {%- assign _imagefromshema = imagefromshema | downcase -%}

          {%- capture texture -%}{%- include 'get_swatch_texture' texture_name: filter_value.value textures_shema: _imagefromshema -%}{%- endcapture -%}
          {%- capture texture_style -%}{%- if texture != '' -%}{{ texture | asset_url }}{%- endif -%}{%- endcapture -%}
          
          {%- assign tagborder = settings.shopby_color_filter_border | excape | strip | downcase -%}
          {% capture tagborder %}{% if value == tagborder %} border{% endif %}{% endcapture %}
          
          {%- assign filter_value_url = filter_value.url_to_add | replace: '&view=ajax', '' -%}
          
          {%- if _otypeco contains _label -%}

          {%- assign colors = ',' | append: settings.product_colors | strip_newlines | downcase | append: ',' -%}
          {%- assign _tag = ',' | append: value | append: ':' -%}
          {%- capture curcol -%}{%- if colors contains _tag -%}{{ colors | split: _tag | last | split: ',' | first | strip }}{%- else -%}{%- endif -%}{%- endcapture -%}

          <a href="{{filter_value_url}}"
            {% if texture_style != '' or curcol != '' %}
            class="options-color{{ tagborder }}"
            style="{%- if texture_style != '' -%}background-image: url('{{ texture_style }}'){%- elsif curcol != '' -%}background:{{curcol}}{%- endif -%}"
            data-tooltip="{{ filter_value.label | excape }}"
            {% endif %}>
            {{ filter_value.label }}
          </a>

          {%- elsif _otypebtn contains _label -%}

          {%- if texture_style != '' -%}
          <a href="{{filter_value_url}}"
            class="options-color{{ tagborder }}"
            style="background-image: url('{{ texture_style }}')">
            {{ filter_value.label }}
          </a>
          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label }}</a>
          {%- endif -%}

          {%- else -%}
          <a href="{{filter_value_url}}">{{ filter_value.label | replace: 'Type|', ' ' }}</a>
          {%- endif -%}
        </li>
        
    {%- endif -%}
    
  {%- endfor -%}
{%- endcapture -%}
{%- assign data_type = data_type | strip -%}

{% #theme-check-enable %} 

{%- capture design -%}
{%- if _otypeco contains _label -%}tt-options-swatch options-middle
{%- elsif _otypebtn contains _label -%}tt-options-swatch options-middle
{%- else -%}tt-list-row
{%- endif -%}
{%- endcapture -%}

<div class="tt-collapse{% unless closedtabs contains _label %} open{% endunless %}{{ state }}">
  {%- if title_new_name contains fl -%}
    {%- assign fl = title_new_name | split: fl | last | split: ',' | first | strip -%}
  {%- else -%}
    {%- assign fl = filter.label -%}
  {%- endif -%}
  {%- if fl == 'By Tag' -%}
  <h3 class="tt-collapse-title{% if titlestouppercase %} text-uppercase{% endif %}">By Collection</h3>
  <div class="tt-collapse-content">
    <ul class="{{ design | strip }} shopifyfiltres-js">{{ data_collection }}</ul>
  </div>
{% endif %}
</div>
<div class="tt-collapse{% unless closedtabs contains _label %} open{% endunless %}{{ state }}">
  {%- if title_new_name contains fl -%}
    {%- assign fl = title_new_name | split: fl | last | split: ',' | first | strip -%}
  {%- else -%}
    {%- assign fl = filter.label -%}
  {%- endif -%}
  {%- if fl == 'By Tag' -%}
  <h3 class="tt-collapse-title{% if titlestouppercase %} text-uppercase{% endif %}">By Category</h3>
  <div class="tt-collapse-content">
    <ul class="{{ design | strip }} shopifyfiltres-js">{{ data_category }}</ul>
  </div>
{% endif %}
</div>
<div class="tt-collapse{% unless closedtabs contains _label %} open{% endunless %}{{ state }}">
  {%- if title_new_name contains fl -%}
    {%- assign fl = title_new_name | split: fl | last | split: ',' | first | strip -%}
  {%- else -%}
    {%- assign fl = filter.label -%}
  {%- endif -%}
  {%- if fl == 'By Tag' -%}
  <h3 class="tt-collapse-title{% if titlestouppercase %} text-uppercase{% endif %}">By School</h3>
  <div class="tt-collapse-content">
    <ul class="{{ design | strip }} shopifyfiltres-js">{{ data_school }}ddd</ul>
  </div>
{% endif %}
</div>
<div class="tt-collapse{% unless closedtabs contains _label %} open{% endunless %}{{ state }}">
  {%- if title_new_name contains fl -%}
    {%- assign fl = title_new_name | split: fl | last | split: ',' | first | strip -%}
  {%- else -%}
    {%- assign fl = filter.label -%}
  {%- endif -%}
  {%- if fl == 'By Tag' -%}
  <h3 class="tt-collapse-title{% if titlestouppercase %} text-uppercase{% endif %}">By Team</h3>
  <div class="tt-collapse-content">
    <ul class="{{ design | strip }} shopifyfiltres-js">{{ data_team }}</ul>
  </div>
{% endif %}
</div>
<div class="tt-collapse{% unless closedtabs contains _label %} open{% endunless %}{{ state }}">
  {%- if title_new_name contains fl -%}
    {%- assign fl = title_new_name | split: fl | last | split: ',' | first | strip -%}
  {%- else -%}
    {%- assign fl = filter.label -%}
  {%- endif -%}
  {%- if fl == 'By Tag' -%}
  <h3 class="tt-collapse-title{% if titlestouppercase %} text-uppercase{% endif %}">By Type</h3>
  <div class="tt-collapse-content">
    <ul class="{{ design | strip }} shopifyfiltres-js">{{ data_type }}</ul>
  </div>
{% endif %}
</div>

